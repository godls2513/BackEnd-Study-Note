# Collection Pattern
### 컬렉션 패턴은 무엇인가?

컬렉션 패턴은 **리소스들을 연결하는 묶음**이라고 할 수가 있다.<br><br>

### 컬렉션 사용
다음은 컬렉션 패턴을 사용하는 예시와 사용하지 않은 예시를 보여준다.<br><br>

컬렉션 패턴을 사용하지 않은 예시<br>
- /the-first-post<br>
- /test-post<br>

컬렉션 패턴을 사용한 예시<br>
- /posts
- /posts/the-first
- /posts/test
- /posts/{post_id}

컬렉션 패턴을 사용한 예시와 컬렉션 패턴을 사용하지 않은 예시의 차이점은 무엇일까?<br><br>

/the-first-post와 같은 리소스는 첫번째 게시물을 표현한다고 가정을 해본다면 전체 게시물 목록을 표현하기가 어려워진다. /posts와 같이 모든 게시물을 하나의 URI로 표현을 한다면 /posts/{post_id} 와 같은 리소스로 쉽게 표현할 수가 있다.<br><br>

/posts/{post_id} 는 /posts/{id} 또는 /posts/:id 등으로 여러가지 표현으로 쓸 수가 있는데 여기서 중괄호 {} 안에 들어 있는 post_id는 리소스의 ID가 아님에 주의해야한다.<br>
- 리소스의 ID = URI = URL
- post_id = 리소스의 ID를 구성하는 요소 중 하나로 posts 그룹 내 식별자(ID)이다. 전체 게시물 목록의 상세 ID라고 생각해도 좋다. <br>

그룹명은 무조건 복수형으로 사용한다. 전체 게시물 목록을 표현할 때는 /posts로 표현하고 그 아래 개별 아이템을 지정하고 싶으면 /posts/1 과 같이 표현하면 된다. /posts/{posts_id}와 같다.<br><br>

### 다양한 상황에서의 컬렉션 패턴

**특정 게시물에 댓글이 달리는 상황**<br>
- /posts/{post_id}/comments<br>
=> 전체 게시물에서 {post_id} 인 게시물의 댓글(comments)로 해석해 볼 수 있다.
- /comments?post_id={post_id} 형태로 표현할 수 있다. 이것은 {post_id}를 통해서 필터링한다는 의미이다. URI에서 드러나는 의미는 미묘하게 다르지만, 구현하는 코드나 결과는 사실상 동일하다.<br>

**특정 게시물에 달린 댓글의 상세**<br>
- /posts/{post_id}/comments/{comment_id} 와 같이 표현할 수 있다.
- 간단하게 /comments/{comment_id}로 표현을 할 수 있지만 어느 게시물의 댓글인지 알 수가 없기 때문에 간단한 댓글 삭제와 같은 작업에는 사용하기 좋아보인다.<br>

**특정 게시물을 수정하는 상황**<br>
- /posts/{post_id}/edit<br>
=> 특정 게시물을 수정한다는 의미로 해석이 가능하다.

**그룹이 아닌 경우**
- /session<br>
=> 세션은 항상 하나만 유지되어야 하므로 항상 단수형으로 쓴다. /sessions/1과 같은 표현이 있으면 안된다.<br><br>

### 정리

컬렉션 패턴의 리소스의 연결을 위한 묶음이라고 처음 말한 것과 같이 효율적으로 리소스들을 묶어서 URI를 표현하는 패턴이다.
그룹이 있으면 그룹은 복수형으로 사용하고, 그룹 아래에 개별 아이템이 있다면 해당 그룹의 식별자ID로 표현을 하여 컬렉션 패턴을 완성할 수가 있다.<br><br>
아직 컬렉션 패턴은 정확하게 ~이다 라고 정의를 못내리겠지만 계속 작성해보며 시행착오를 겪으면 자연스럽게 체득이 될 것이다. 그 때까지 연습을 게을리 하지 말자~!!


